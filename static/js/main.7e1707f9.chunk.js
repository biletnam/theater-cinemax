(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e){e.exports={a:{twinSeat:{name:"Twin Seat",price:25e3},veryVip:{name:"Very VIP",price:1e5},vip:{name:"VIP",price:5e4},economy:{name:"Economy",price:2e4}}}},29:function(e,t,a){e.exports=a(57)},34:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(23),s=a.n(o),i=(a(34),a(2)),c=a(3),u=a(5),l=a(4),h=a(6),p=a(60),b=a(61),y=a(58),m=a(8),f=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.seat;return r.a.createElement("div",{className:"theater-seat ".concat(e.helpers.class)},r.a.createElement("sup",{className:"theater-seat-key"},e.key),r.a.createElement("span",{className:"theater-seat-symbol"},e.helpers.icon))}}]),t}(n.Component),v=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"makeColumns",value:function(){var e=this.props,t=e.theater,a=e.row;return t.columns.map(function(e){var n=t.getSeatInPositon(a,e);return r.a.createElement(f,{key:n.key,seat:n})})}},{key:"render",value:function(){return r.a.createElement("div",{className:"theater-column"},this.makeColumns())}}]),t}(n.Component),k=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.theater;return r.a.createElement("div",null,e.rows.map(function(t){return r.a.createElement(v,{theater:e,row:t,key:t})}))}}]),t}(n.Component),O=Object(m.b)(function(e){return{theater:e.theater}})(k),g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return Array.from({length:e},function(e,a){return t(++a)})},d=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.props.onChange&&this.props.onChange(e.currentTarget.value)}},{key:"renderInput",value:function(){var e=this.props.type||"text",t={className:"input",onChange:this.handleChange.bind(this)};return"select"===e?this.renderSelect(t):r.a.createElement("input",Object.assign({type:e},t))}},{key:"renderSelect",value:function(e){return r.a.createElement("select",e,r.a.createElement("option",{value:""},"Select ..."),this.generateOptions())}},{key:"generateOptions",value:function(){var e=this,t=this.props.options||[];return null!==t&&"object"===typeof t?Object.keys(t).map(function(a){return e.makeOption(t[a],a,!0)}):Array.isArray(t)?t.map(this.makeOption):+t?g(t,this.makeOption):void 0}},{key:"makeOption",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r.a.createElement("option",{key:t||e,value:a?t:e},e)}},{key:"render",value:function(){var e=this.props.label;return r.a.createElement("div",{className:"form-group"},e&&r.a.createElement("label",null,e),this.renderInput())}}]),t}(n.Component),j=a(10),E={updateSeatCateogry:"UPDATE-SEAT-CATEGORY",updateBookingError:"UPDATE-BOOKING-ERROR",updateToBookSeats:"UPDATE-NUMBER-OF-SEATS-TO-BE-BOOKED",toogleSeatBooking:"ADD-SEAT-TO-BOOKING-CART",updateError:"UPDATE-CURRENT-ERROR",processBooking:"PROCESS-CART-BOOKING",updateErrorMessage:"UPDATES-CURRENT-ERROR-MESSAGE"},S=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"makeSeat",value:function(){var e=this.props.seat;return Array.isArray(e)||(e=[e]),e.map(function(e){return r.a.createElement("span",{key:e.key},e.key)})}},{key:"render",value:function(){return r.a.createElement("span",{className:"d-flex multiple-seat"},this.makeSeat())}}]),t}(n.Component),C=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"combineKeys",value:function(e){return e.map(function(e){return e.key}).join("")}},{key:"getSeatKey",value:function(){var e=this.props.seat;return Array.isArray(e)?this.combineKeys(e):e.key}},{key:"addToCart",value:function(e){var t=e.currentTarget.checked,a=this.props,n=a.seat,r=a.toggleBooking,o=a.toBookSeats,s=a.cart,i=a.updateErrorMessage,c=Object.keys(s).length;return o?t&&c>=o?i("The number of required seats has already been achieved"):void r(n,this.getSeatKey()):i("Please select the number of tickets you would want to book")}},{key:"isChecked",value:function(){var e=this,t=this.props.cart;return Object.keys(t).find(function(t){return t===e.getSeatKey()})||!1}},{key:"render",value:function(){return r.a.createElement("div",{className:"theater-seat theater-seat-has-switch"},r.a.createElement(S,{seat:this.props.seat}),r.a.createElement("label",{className:"switch"},r.a.createElement("input",{type:"checkbox",checked:this.isChecked(),onChange:this.addToCart.bind(this)}),r.a.createElement("span",{className:"slider round"})))}}]),t}(n.Component),w=Object(m.b)(function(e){return{cart:e.cart,toBookSeats:e.toBookSeats}},function(e){return{toggleBooking:function(t,a){return e(function(e,t){return{type:E.toogleSeatBooking,seat:e,key:t}}(t,a))},updateErrorMessage:function(t){return e(function(e){return{type:E.updateErrorMessage,error:e}}(t))}}})(C),A=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.cart;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"alert alert-primary mt-1"},"Total: ",this.computeTotal()),r.a.createElement("div",null,r.a.createElement("button",{className:"btn",disabled:this.cantBook()},"Book")),r.a.createElement("div",{className:"d-flex flex-wrap jcc bg-gray mt-1 booked-seats"},Object.values(e).map(function(e,t){return r.a.createElement(w,{key:t,seat:e})})))}},{key:"computeTotal",value:function(){var e=this.props.cart;return Object.values(e).reduce(function(e,t){return e+(Array.isArray(t)?2*j.a.twinSeat.price:j.a[t.category].price)},0).toLocaleString()}},{key:"cantBook",value:function(){var e=this.props,t=e.cart,a=e.toBookSeats,n=Object.keys(t).length;return!n||n<a}}]),t}(n.Component),T=Object(m.b)(function(e){return{cart:e.cart,toBookSeats:e.toBookSeats}})(A),B=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("form",{className:"booking-form",onSubmit:this.submit.bind(this)},r.a.createElement(d,{label:"Number of Seats to book",type:"select",options:this.props.availableSeats,onChange:this.props.updateToBookSeats}),r.a.createElement(d,{label:"Seat category",type:"select",options:this.seatCategories(),onChange:this.props.updateCategory}),r.a.createElement(T,null)))}},{key:"seatCategories",value:function(){var e={};return Object.keys(j.a).forEach(function(t){return e[t]=j.a[t].name}),e}},{key:"submit",value:function(e){e.preventDefault(),this.props.book()}}]),t}(n.Component),N=Object(m.b)(function(e){var t=e.availableSeats,a=e.cart;return{availableSeats:t.length,cart:a}},function(e){return{updateCategory:function(t){return e({type:E.updateSeatCateogry,category:t})},updateToBookSeats:function(t){return e(function(e){return{type:E.updateToBookSeats,value:e}}(t))},book:function(){return e({type:E.processBooking})}}})(B),R=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.seatCategory,a=e.availableSeats,n=j.a[t].name;return r.a.createElement("div",null,r.a.createElement("h4",{className:"text-center"},"Available",r.a.createElement("strong",{className:"text-primary"}," ",n," "),"Seats"),r.a.createElement("div",{className:"d-flex flex-wrap jcc"},a.map(function(e,t){return r.a.createElement(w,{key:t,seat:e})})))}}]),t}(n.Component),x=Object(m.b)(function(e){return{seatCategory:e.seatCategory,availableSeats:e.availableSeats}})(R),M=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.seatCategory;return r.a.createElement("div",{className:"booking-seat-category"},e&&r.a.createElement(x,null))}}]),t}(n.Component),P=Object(m.b)(function(e){return{seatCategory:e.seatCategory,availableSeats:e.availableSeats}})(M),V=[{text:"Theater",path:"/",component:O},{text:"Booking",path:"/booking",component:function(){return r.a.createElement("div",{className:"booking"},r.a.createElement(N,null),r.a.createElement(P,null))}},{text:"Statistics",path:"/statistics",component:function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"Statistics")}}]),t}(n.Component)}],D=a(13),I=a(12),K=a(14),U=function(){function e(t,a){Object(i.a)(this,e),this.row=t,this.column=a,this.isAvailable=!0,this.isReserved=!1}return Object(c.a)(e,[{key:"getCurrentCategoryProp",value:function(e){return this.category&&j.a[this.category][e]}},{key:"reserve",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.isAvailable=!e,this.isReserved=e,this}},{key:"setAvailable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.isAvailable=e,this}},{key:"book",value:function(){return this.isReserved=!1,this.isAvailable=!1,this}},{key:"key",get:function(){return this.row+this.column}},{key:"category",get:function(){var e=this,t={isTwinSeat:"twinSeat",isVeryVip:"veryVip",isVip:"vip",isEconomy:"economy"};return t[Object.keys(t).find(function(t){return e[t]})]}},{key:"isTwinSeat",get:function(){return("A"===this.row||"B"===this.row)&&this.column>=5&&this.column<=15}},{key:"isVeryVip",get:function(){return!this.twinSeat&&("A"===this.row||"B"===this.row)||this.row>="C"&&this.row<="F"}},{key:"isVip",get:function(){return this.row>="G"&&this.row<="L"}},{key:"isEconomy",get:function(){return this.row>="M"&&this.row<="P"}},{key:"price",get:function(){return this.getCurrentCategoryProp("price")}},{key:"label",get:function(){return this.getCurrentCategoryProp("name")}},{key:"helpers",get:function(){return this.isAvailable?{class:"available",icon:"*"}:this.isReserved?{class:"reserved",icon:"o"}:{class:"booked",icon:"#"}}}]),e}(),_=a(26),F=a.n(_),G=new(function(){function e(){Object(i.a)(this,e),this.rows=g(16,this.convertNumberToAlphabet),this.columns=g(20),this.bookedSeats={},this.setSeats(),this.book=this.book.bind(this)}return Object(c.a)(e,[{key:"setSeats",value:function(){this.seats={},this.rows.forEach(this.setRowSeats.bind(this))}},{key:"setRowSeats",value:function(e){var t=this;this.columns.forEach(function(a){var n=new U(e,a);t.seats[n.key]=n})}},{key:"convertNumberToAlphabet",value:function(e){if(!+e||e>26||e<1)throw new Error("".concat(e," can't be converted to an alphabet"));return String.fromCharCode(e+64)}},{key:"getSeatInPositon",value:function(e,t){return this.seats[e+t]}},{key:"getAvailableSeatsForCategory",value:function(e){var t=this,a=Object.values(this.seats).filter(function(a){return a.category===e&&!t.bookedSeats[a.key]&&a.isAvailable&&!a.isReserved});return"twinSeat"===e?F()(a,2):a}},{key:"book",value:function(e){e.isAvailable=!1,this.bookedSeats=Object(I.a)({},this.bookedSeats,Object(K.a)({},e.key,e))}}]),e}()),L={theater:G,errorMessage:"",successMessage:"",toBookSeats:0,seatCategory:null,cart:{},availableSeats:Object.keys(G.seats)},J=new(function(){function e(){Object(i.a)(this,e),this.state=L}return Object(c.a)(e,[{key:"setState",value:function(e){return e&&(this.state=Object(I.a)({},e,{errorMesssage:"",successMessage:""})),this}},{key:"nextState",value:function(e){var t=e.type;for(var a in E)if(E[a]===t&&this[a])return this[a](e)||this.state;return this.state}},{key:"updateToBookSeats",value:function(e){return Object(I.a)({},this.state,{toBookSeats:+e.value})}},{key:"updateSeatCateogry",value:function(e){var t=e.category;return Object(I.a)({},this.state,{seatCategory:t,availableSeats:G.getAvailableSeatsForCategory(t)})}},{key:"toogleSeatBooking",value:function(e){var t=this.state.cart,a=e.key,n=e.seat;return t[a]?delete t[a]:t[a]=n,Object(I.a)({},this.state,{cart:Object(I.a)({},t)})}},{key:"updateErrorMessage",value:function(e){var t=e.error;return Object(I.a)({},this.state,{errorMessage:t})}},{key:"processBooking",value:function(){var e=this.state.cart;return Object.values(e).forEach(function(e){Array.isArray(e)?e.forEach(G.book):G.book(e)}),Object(I.a)({},L,{cart:{},successMessage:"Booking was successfully processed"})}}]),e}()),X=a(27),q=a.n(X),Y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,z=Object(D.c)(function(e,t){return J.setState(e).nextState(t)},Y(Object(D.a)(q.a))),H=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.errorMessage,a=e.successMessage;if(!t&&!a)return null;var n=t||a,o=t?"alert-danger":"alert-primary";return r.a.createElement("div",{className:"alert text-center mb-1 ".concat(o)},n)}}]),t}(n.Component),Q=Object(m.b)(function(e){return{errorMessage:e.errorMessage,successMessage:e.successMessage}})(H),W=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,{store:z},r.a.createElement(p.a,null,r.a.createElement("div",{id:"main-wrapper"},r.a.createElement("header",{className:"header"},"Cinemax Theater"),r.a.createElement("nav",{className:"navbar"},V.map(function(e){return r.a.createElement(b.a,{to:e.path,key:e.text,exact:!0},e.text)})),r.a.createElement("main",{className:"main"},r.a.createElement(Q,null),V.map(function(e){return r.a.createElement(y.a,{key:e.text,path:e.path,component:e.component,exact:!0})})))))}}]),t}(n.Component);s.a.render(r.a.createElement(W,null),document.getElementById("root"))}},[[29,2,1]]]);
//# sourceMappingURL=main.7e1707f9.chunk.js.map